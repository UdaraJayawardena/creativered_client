<head>
    <title>Profile</title>
</head>

<br>
<div class="container">
    <ngb-tabset>
        <ngb-tab title="my details">
            <ng-template ngbTabContent>
                <div class="detail-tab not-yet-one" style="margin: 15px!important;">
                    <br>
                    <form class="frmdata">
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="validationDefault01">First name</label>
                                <input #first name="firstName" type="text" value="{{firstName}}" placeholder="firstname"
                                       class="form-control shipping-detail-input" id="validationDefault01" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="validationDefault02">Last name</label>
                                <input #last name="lastName" type="text" class="form-control shipping-detail-input"
                                       id="validationDefault02"
                                       required placeholder="lastname" value="{{lastName}}">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="validationDefault02">Username</label>
                                <input #user name="telephone" value="{{username}}" placeholder="username"
                                       type="text" class="form-control shipping-detail-input"
                                       id="validationDefaultUsername" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="validationDefault03">Email</label>
                                <input readonly name="addressOne" type="email"
                                       class="form-control shipping-detail-input"
                                       id="validationDefault03" required value="{{email}}" placeholder="email">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="validationDefault03">Password</label>
                                <input #pass name="addressOne" type="password"
                                       class="form-control shipping-detail-input"
                                       id="validationDefault04" required placeholder="enter your password to confirm">
                            </div>

                            <div class="col-md-4 mb-3 form-check" style="margin-left: 20px;">
                                <input type="checkbox" (click)="changeSubscribe()" class="form-check-input"
                                       [checked]="isSubscribed">
                                <label class="form-check-label" style="margin-top: 12px;">check updates via
                                    email</label>
                            </div>

                        </div>

                        <div class="form-row">
                            <div class="col-md-2 mb-2">
                                <button data-toggle="modal" data-target="#changePasswordmodel"
                                        class="btn btn-danger nextBtn"
                                        type="button">Change Password
                                </button>
                            </div>
                            <div class="col-md-2 mb-2">
                                <button (click)="updateCustomer(first.value,last.value,user.value,pass.value)"
                                        class="btn btn-danger nextBtn" type="button">Update
                                </button>
                            </div>
                        </div>
                    </form>
                    <br>
                </div>
            </ng-template>
        </ngb-tab>
        <ngb-tab title="shipping details">
            <ng-template ngbTabContent style="min-height: 500px;">
                <div *ngIf="!haveShippingAddres && addNewSAddress" class="not-yet-one">
                    <div class="not-yet-text-one">
                        <img src="../../../assets/no_address.jpg" style="height: 100px;" alt="">
                        <h4>no any shipping address yet</h4><br>
                        <button class="btn remove-btn" (click)="addNewShippingAddress()" style="font-size: 15px">add new
                            shipping address
                        </button>
                    </div>
                </div>
                <div *ngIf="!addNewSAddress" class="not-yet-one" style="margin-left: 20px; margin-top: 20px;">
                    <h6 style="text-align: left; color: #d60d39">no any shipping address yet. add new one.</h6>
                    <hr>
                    <form class="frmdata">
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="sFirstName">First name</label>
                                <input #sfName name="sFirstName" type="text" placeholder="enter first name"
                                       class="form-control shipping-detail-input" id="sFirstName" required>
                                <small *ngIf="shippingFirstName" style="color: #d60d39">invalid name</small>
                                <small *ngIf="shippingFirstNameInput" style="color: #d60d39">enter first name</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="sLastaName">Last name</label>
                                <input #slName name="sLastaName" type="text" class="form-control shipping-detail-input"
                                       id="sLastaName" required placeholder="enter last name">
                                <small *ngIf="shippingLastName" style="color: #d60d39">invalid name</small>
                                <small *ngIf="shippingLastNameInput" style="color: #d60d39">enter last name</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="sAddressLineOne">Address line 1</label>
                                <input #sAddressOne name="sAddressLineOne" placeholder="enter address line 1"
                                       type="text"
                                       class="form-control shipping-detail-input" id="sAddressLineOne" required>
                                <small *ngIf="shippingAddressOne" style="color: #d60d39">invalid address</small>
                                <small *ngIf="shippingAddressOneInput" style="color: #d60d39">enter address line 1
                                </small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="sAddressLineTwo">Address Line 2</label>
                                <input #sAddressTwo name="sAddressLineTwo" type="text" id="sAddressLineTwo" required
                                       class="form-control shipping-detail-input" placeholder="enter address line 2">
                                <small *ngIf="shippingAddressTwo" style="color: #d60d39">invalid address</small>
                                <small *ngIf="shippingAddressTwoInput" style="color: #d60d39">enter address line 2
                                </small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="sCity">City</label>
                                <input #sCity name="sCity" type="text" class="form-control shipping-detail-input"
                                       id="sCity" required placeholder="enter city">
                                <small *ngIf="shippingCity" style="color: #d60d39">invalid city</small>
                                <small *ngIf="shippingCityInput" style="color: #d60d39">enter shipping city</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="countryType">Country</label>
                                <select class="custom-select country-combo" id="countryType" #sCountryType
                                        style="font-size: 15px;">
                                    <option selected>select country</option>
                                    <option *ngFor="let country of allCounties">{{country.Country}}</option>
                                </select>
                                <small *ngIf="shippingCountryInput" style="color: #d60d39">select country</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="sPostalCode">Postal code</label>
                                <input #sPostalCode name="sPostalCode" type="text" id="sPostalCode" required
                                       class="form-control shipping-detail-input"
                                       placeholder="enter postal code">
                                <small *ngIf="shippingPostalCode" style="color: #d60d39">invalid postal code</small>
                                <small *ngIf="shippingPostalCodeInput" style="color: #d60d39">enter postal code</small>
                            </div>
                        </div>
                        <br>
                        <div class="form-row">
                            <div class="col-md-2 mb-2" style="text-align: left">
                                <button style="font-size: 15px; width: 100px;" class="btn remove-btn"
                                        (click)="saveNewShippingAddress(sfName.value,slName.value,sAddressOne.value,
                                        sAddressTwo.value,sCity.value,sCountryType.value,sPostalCode.value)">
                                    save
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="detail-tab not-yet-one" *ngIf="haveShippingAddres"
                     style="min-width: 100%!important; text-align: center; padding-left: 20px; padding-top: 20px;">
                    <table class="table table-responsive"
                           style="height: 45vh;">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">first name</th>
                            <th scope="col">last name</th>
                            <th scope="col">address line 1</th>
                            <th scope="col">address line 2</th>
                            <th scope="col">city</th>
                            <th scope="col">country</th>
                            <th scope="col">postal code</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let address of shippingDetail; index as i"
                            style="cursor: pointer">
                            <th scope="row">{{ i + 1 }}</th>
                            <td>{{address.firstName}}</td>
                            <td>{{address.lastName}}</td>
                            <td>{{address.addressOne}}</td>
                            <td>{{address.addressTwo}}</td>
                            <td>{{address.city}}</td>
                            <td>{{address.country}}</td>
                            <td>{{address.postalCode}}</td>
                            <td>
                                <button class="btn remove-btn" (click)="removeShippingAddress(address)">remove
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </ng-template>
        </ngb-tab>
        <ngb-tab title="billing details">
            <ng-template ngbTabContent style="min-height: 500px;">
                <div *ngIf="!haveBillingAddress && addNewBAddress" class="not-yet-one">
                    <div class="not-yet-text-one">
                        <img src="../../../assets/no_address.jpg" style="height: 100px;" alt="">
                        <h4>no any billing address yet</h4><br>
                        <button class="btn remove-btn" style="font-size: 15px" (click)="addNewBillingAddress()">
                            add new billing address
                        </button>
                    </div>
                </div>
                <div *ngIf="!addNewBAddress" class="not-yet-one" style="margin-left: 20px; margin-top: 20px;">
                    <h6 style="text-align: left; color: #d60d39">no any billing address yet. add new one. </h6>
                    <hr>
                    <form class="frmdata">
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="bFirstName">First name</label>
                                <input #bfName name="sFirstName" type="text" placeholder="enter first name"
                                       class="form-control shipping-detail-input" id="bFirstName" required>
                                <small *ngIf="billingFirstName" style="color: #d60d39">invalid name</small>
                                <small *ngIf="billingFirstNameInput" style="color: #d60d39">enter first name</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="bLastaName">Last name</label>
                                <input #blName name="sLastaName" type="text" class="form-control shipping-detail-input"
                                       id="bLastaName" required placeholder="enter last name">
                                <small *ngIf="billingLastName" style="color: #d60d39">invalid name</small>
                                <small *ngIf="billingLastNameInput" style="color: #d60d39">enter last name</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="bAddressLineOne">Address line 1</label>
                                <input #bAddressOne name="sAddressLineOne" placeholder="enter address line 1"
                                       type="text"
                                       class="form-control shipping-detail-input" id="bAddressLineOne" required>
                                <small *ngIf="billingAddressOne" style="color: #d60d39">invalid address</small>
                                <small *ngIf="billingAddressOneInput" style="color: #d60d39">enter address line 1
                                </small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="bAddressLineTwo">Address Line 2</label>
                                <input #bAddressTwo name="sAddressLineTwo" type="text" id="bAddressLineTwo" required
                                       class="form-control shipping-detail-input" placeholder="enter address line 2">
                                <small *ngIf="billingAddressTwo" style="color: #d60d39">invalid address</small>
                                <small *ngIf="billingAddressTwoInput" style="color: #d60d39">enter address line 2
                                </small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="bCity">City</label>
                                <input #bCity name="sCity" type="text" class="form-control shipping-detail-input"
                                       id="bCity" required placeholder="enter city">
                                <small *ngIf="billingCity" style="color: #d60d39">invalid city</small>
                                <small *ngIf="billingCityInput" style="color: #d60d39">enter city</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="bCountryType">Country</label>
                                <select class="custom-select country-combo" id="bCountryType" #bCountryType
                                        style="font-size: 15px;">
                                    <option selected>select country</option>
                                    <option *ngFor="let country of allCounties">{{country.Country}}</option>
                                </select>
                                <small *ngIf="billingCountryInput" style="color: #d60d39">select country</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="bPostalCode">Postal code</label>
                                <input #bPostalCode name="sPostalCode" type="text" id="bPostalCode" required
                                       class="form-control shipping-detail-input"
                                       placeholder="enter postal code">
                                <small *ngIf="billingPostalCode" style="color: #d60d39">invalid postal code</small>
                                <small *ngIf="billingPostalCodeInput" style="color: #d60d39">enter postal code</small>
                            </div>
                        </div>
                        <br>
                        <div class="form-row">
                            <div class="col-md-2 mb-2" style="text-align: left">
                                <button style="font-size: 15px; width: 100px;" class="btn remove-btn"
                                        (click)="saveNewBillingAddress(bfName.value,blName.value,bAddressOne.value,
                                        bAddressTwo.value,bCity.value,bCountryType.value,bPostalCode.value)">
                                    save
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="detail-tab not-yet-one" *ngIf="haveBillingAddress"
                     style="min-width: 100%!important; text-align: center; padding-left: 20px; padding-top: 20px;">
                    <table class="table table-responsive"
                           style="height: 45vh;">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">first name</th>
                            <th scope="col">last name</th>
                            <th scope="col">address line 1</th>
                            <th scope="col">address line 2</th>
                            <th scope="col">city</th>
                            <th scope="col">country</th>
                            <th scope="col">postal code</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let address of billingDetail; index as i"
                            style="cursor: pointer">
                            <th scope="row">{{ i + 1 }}</th>
                            <td>{{address.firstName}}</td>
                            <td>{{address.lastName}}</td>
                            <td>{{address.addressOne}}</td>
                            <td>{{address.addressTwo}}</td>
                            <td>{{address.city}}</td>
                            <td>{{address.country}}</td>
                            <td>{{address.postalCode}}</td>
                            <td>
                                <button class="btn remove-btn" (click)="removeBillingAddress(address)">remove
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </ng-template>
        </ngb-tab>

        <ngb-tab title="Inbox">
            <ng-template ngbTabContent>
                <div *ngIf="!haveMessage" class="not-yet-one">
                    <div class="not-yet-text-one">
                        <img src="../../../assets/no_message.png" style="height: 150px;" alt="">
                        <h4>no any complaint messages</h4>
                    </div>
                </div>
                <div class="detail-tab" style="margin: 15px!important; min-height: 300px!important;"
                     *ngIf="haveMessage">
                    <br>
                    <div style="margin-bottom: 15px;font-size: 14px" class="col-md-12 col-xl-12 col-lg-12">
                        <table class="table table-striped table-responsive"
                               style="height: 50vh;cursor: pointer;margin-bottom: 7%">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Time</th>
                                <th>Message</th>
                                <th>Status</th>
                                <th>Complain Type</th>
                                <th>Order ID</th>
                                <th>Check</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let complain of complainsList; index as i">
                                <th scope="row">{{ i + 1 }}</th>
                                <td>{{complain.date | date}} {{complain.time}}</td>
                                <td>{{complain.message | slice:0:25}} ...</td>
                                <td *ngIf="(complain.status === 'true')" style="font-weight: bold;color: #d60d39">
                                    seen
                                </td>
                                <td *ngIf="(complain.status === 'false')" style="font-weight: bold;color: #d60d39">
                                    sent
                                </td>
                                <td>{{complain.complain}}</td>
                                <td>{{complain.orderId}}</td>
                                <td>
                                    <button class="btn-group-lgh" type="button" data-toggle="modal"
                                            data-target="#complainModal"
                                            (click)="setComplain(complain)">View
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </ng-template>
        </ngb-tab>
    </ngb-tabset>
</div>

<div class="modal fade" id="complainModal" tabindex="-1" role="dialog" aria-labelledby="complainModal"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border-radius: 20px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center">
                <div class="row complain-view">
                    <div class="col-4 complain-order-id">order id : {{complaint.orderId}}</div>
                    <div class="col-8 complain-type">complaint type : {{complaint.complain}}</div>
                    <div class="col-12 complain-body complainBackground">
                        <div class="row">
                            <div class="col-4 userName">{{username}}</div>
                            <div class="col-8 complainDate">{{complaint.date | date}} {{complaint.time}}</div>
                            <div class="col-12 complain-message">{{complaint.message}}</div>
                        </div>
                    </div>

                    <div class="col-12 complain-body" *ngIf="(reply.id !== 0)">
                        <div class="row">
                            <div class="col-4 adminName">admin</div>
                            <div class="col-8 complainDate">{{reply.replyDate | date}} {{reply.replyTime}}</div>
                            <div class="col-12 complain-message">{{reply.message}}</div>
                            <div class="col-12 reply">
                                <button class="btn replyBtn" (click)="writeReply()">reply</button>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 reply-body" *ngIf="(isReply)">
                        <div class="row">
                            <textarea class="reply-message" #replyMessage placeholder="enter reply message"></textarea>
                            <div class="col-12 reply">
                                <button class="btn replyBtn" (click)="sendReply(replyMessage.value)">send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="changePasswordmodel" tabindex="-1" role="dialog" aria-labelledby="changePasswordmodel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border-radius: 20px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="">
                <div class="main-sign-in">
                    <form #login="ngForm">
                        <div>
                            <h2 class="topic">Change Password</h2>
                        </div>
                        <div>
                            <input #current type="password" name="currentPassword" required
                                   placeholder="enter current password"
                                   class="username-text">
                        </div>
                        <div>
                            <input #new type="password" name="password" required placeholder="enter new password"
                                   class="input-fields password-text">
                        </div>
                        <div>
                            <input #newTwo type="password" name="confPassword" required
                                   placeholder="re-enter new password"
                                   class="input-fields password-text">
                        </div>
                        <div>
                            <input (click)="resetPassword(current.value,new.value,newTwo.value)" type="button"
                                   value="change password"
                                   class="btn sign-in-btn">
                        </div>
                        <br><br>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
